use(["public/pages/item/store.js","public/pages/item/itemService.js","public/widget/prompt/prompt.js"],function(){function t(t,e){return new VueRoot({template:"public/pages/item/item.html",data:{storage:t,articalId:0,platFormId:0,platFormName:"",platFormList:[],moduleId:0,moduleName:"请选择",moduleList:[],isShowModule:!1,name:"",description:"",editor:""},store:e,created:function(){},mounted:function(){this.init();var t=this.storage.info;t.articalId&&(this.articalId=t.articalId,this.platFormId=t.plat_id,this.name=t.name,this.description=t.artical_desc,this.editor=t.content)},methods:{init:function(){this.getPlatForm()},getPlatForm:function(){var t=this;itemService.getPlatForm(function(e){if(0==e.errorCode){if(t.platFormList=e.data,t.storage.info.plat_id&&e.data){var i=e.data.find(function(e,i){return e.id==t.storage.info.plat_id});t.platFormName=i.name,t.platFormId=i.id}else t.platFormList[0]&&(t.platFormName=t.platFormList[0].name,t.platFormId=t.platFormList[0].id);t.getModule()}})},getModule:function(){var t=this,e={urlParams:{platId:this.platFormId}};itemService.getModule(e,function(e){if(0==e.errorCode)if(t.moduleList=e.data,t.storage.info.module_id&&e.data){var i=e.data.find(function(e,i){return e.id==t.storage.info.module_id});t.moduleName=i.name,t.moduleId=i.id,t.isShowModule=!0}else t.moduleList[0]?(t.moduleId=t.moduleList[0].id,t.moduleName=t.moduleList[0].name,t.isShowModule=!0):(t.moduleId=0,t.moduleName="请选择",t.isShowModule=!1)})},changePlatForm:function(t){this.platFormId=t.id,this.platFormName=t.name,this.storage.info.module_id=0,this.getModule()},changeModule:function(t){this.moduleId=t.id,this.moduleName=t.name},save:function(){var t={urlParams:{platFormId:this.moduleId||this.platFormId,name:this.name,desc:this.description,content:this.editor}};this.articalId?t.urlParams.articalId=this.articalId:delete t.urlParams.articalId,itemService.artical(t,function(t){0==t.errorCode?(prompts.init("success",t.msg),setTimeout(function(){window.location.href="/homepage"},3e3)):prompts.init("warnning",t.msg)})},cancel:function(){window.location.href="/homepage"}}})}if(module.exports=t,"undefined"!=typeof window){t(storage,store).$mount("#app")}});