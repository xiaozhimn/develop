use(["public/pages/tpl/store.js","public/pages/tpl/tplService.js","public/widget/prompt/prompt.js","public/pages/components/tpl/viewDialog/viewDialog.js"],function(){function e(e,t){var n=null,i=null;return"undefined"!=typeof window&&(window.getCode=function(){return n.getValue()}),new VueRoot({template:"public/pages/tpl/tpl.html",data:e,store:t,created:function(){},mounted:function(){n=CodeMirror.fromTextArea(document.getElementById("code-box"),{lineNumbers:!0,smartIndent:!1,height:"600px",matchBrackets:!0}),n.setOption("theme","mdn-like"),n.setValue($.trim(n.getValue())),i=CodeMirror.fromTextArea(document.getElementById("style-code"),{lineNumbers:!0,smartIndent:!1,height:"600px",matchBrackets:!0}),i.setOption("theme","mdn-like"),i.setValue($.trim(i.getValue()))},methods:{save:function(){var e=encodeURIComponent(n.getValue()),t=this.name,i=easyVue.getQueryString("id")||"";tplService.saveTpl({urlParams:{name:t,content:e,tplId:i}},function(e){"-1"==e.errorCode?prompts.init("warnning",e.msg):(prompts.init("success","发布成功"),window.location.href="/tpl")})},showSheetStyle:function(){this.isShowTpl=!1},saveStyle:function(){if(!this.styleContent)return void prompts.init("warnning","所填信息不能为空！");tplService.saveStyleContent({urlParams:{styleContent:i.getValue()}},function(e){"-1"==e.errorCode?prompts.init("warnning",e.msg):prompts.init("success","保存成功")})},viewTpl:function(){$("#viewer").html("");var e=Vue.extend({template:"<viewDialogComponent :isShowDialog='true'></viewDialogComponent>"}),t=(new e).$mount();$("#viewer").append($(t.$el))},deleteTpl:function(){if(window.confirm("是否确定删除?")){var e=easyVue.getQueryString("id")||"";tplService.deleteTpl({urlParams:{id:e}},function(e){"-1"==e.errorCode?prompts.init("warnning",e.msg):(prompts.init("success","删除成功"),window.location.href="/tpl")})}}}})}if(module.exports=e,"undefined"!=typeof window){e(storage,store).$mount("#app")}});