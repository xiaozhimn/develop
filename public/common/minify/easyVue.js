function getTemplateContent(e){var t=e.indexOf("<template>"),n=e.indexOf("</template>");return e=e.substring(t+"<template>".length,n).trim()}function requireJs(e){return function(t){e&&!assetsPool[e]?(assetsPool[e]=!0,easyVue.getRemoteTpl(e,function(e){t(null,e)})):t(null,"")}}function combineStore(e,t){return e.state&&t?(e.state=$.extend(!0,e.state,t),e):!e.state&&t?(e.state={},e.state=$.extend(!0,e.state,t),e):e.state&&!t?e:(e.state={},e)}function insertJs(e,t,n){$.globalEval(e)}function insertCss(e){var t=$("<style></style>");t.html(e),$("head").append(t)}var module={},easyVue={},componentPool={},assetsPool={},exceptionConfig;easyVue.relateJs={},String.prototype.replaceAll=function(e,t){return this.replace(new RegExp(e,"gm"),t)},easyVue.getQueryString=function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),n=window.location.search.substr(1).match(t);return null!=n?unescape(n[2]):null},easyVue.httpResponseInterceptor=function(e){exceptionConfig||(exceptionConfig=$.ajax({url:"common/exception.json",type:"GET",async:!1}).responseText,exceptionConfig=JSON.parse(exceptionConfig));for(var t in exceptionConfig)if(e[t])for(var n in exceptionConfig[t])if(n==e[t]){var a=exceptionConfig[t][n];"401"!=n&&"403"!=n?location.href=a:"401"==n&&(location.href=storage.loginRoute);break}return e},easyVue.getTplContent=function(e,t){if(!t){var n=$.ajax({url:e.substring(e.indexOf("/"),e.length),cache:storage.isUseGlobalCache,type:"GET",dataType:"text",async:!1}).responseText;return cacheStore.set(e,{url:n,timestamp:storage.timestamp}),n}$.ajax({url:e.substring(e.indexOf("/"),e.length),type:"GET",cache:storage.isUseGlobalCache,dataType:"text",success:function(n){cacheStore.set(e,{url:n,timestamp:storage.timestamp}),t(n)}})},easyVue.getRemoteTpl=function(e,t){if(e.indexOf(".js")==e.length-3&&-1==e.indexOf("components/")&&-1==e.indexOf("widget/")&&storage.isUseGlobalCache){e=e.substring(0,e.lastIndexOf("/"))+"/minify"+e.substring(e.lastIndexOf("/"),e.length)}e.indexOf("?")>-1?e+="&timestamp="+storage.timestamp:e+="?timestamp="+storage.timestamp;var n=cacheStore.get(e);return n&&n.timestamp==storage.timestamp?t?void t(n.url):n.url:easyVue.getTplContent(e,t)},easyVue.async={done:function(e,t,n,a){return function(o,s){var r=0;n[e]=s;for(var i in n)++r==a&&t(null,n)}},parallel:function(e,t){var n={},a=0;for(var o in e)a++;for(var o in e)e[o](this.done(o,t,n,a))}};var VueRoot=function(){store=combineStore(store,storage.state);for(var e=arguments,t=0;t<e.length;t++){var n=e[t];if("object"==typeof n&&store.state){var a={};if(n.data&&(a=n.data),store.state)for(var o in store.state)a[o]=store.state[o];n.data=function(){return a}}if("object"==typeof n&&n.template&&n.template.indexOf("public/")>-1){var s=easyVue.getRemoteTpl(n.template);e[t].template=getTemplateContent(s)}}var r=new Vue(e[0]);return r.actions=store.actions,r.state=store.state,flux.ev.push(r),r},VueComponent=Vue.component;Vue.component=function(){store=combineStore(store,storage.state);for(var e=this,t=arguments,n=0;n<t.length;n++){var a=t[n];!function(n,a){if("object"==typeof n&&store.state){var o={};if(n.data&&(o=n.data()),store.state)for(var s in store.state)o[s]=store.state[s];n.data=function(){return o}}"object"==typeof n&&n.template&&n.template.indexOf("public/")>-1?(n.template=componentPool[n.template],t[a]=n,VueComponent.apply(e,t)):"object"==typeof n&&n.template&&-1==n.template.indexOf("public/")&&VueComponent.apply(e,t)}(a,n)}},easyVue.useCount=0;var callbackPool=[];window.use=function(e,t){callbackPool.push(t);var n={};if(e&&0!=e.length)for(var a=0;a<e.length;a++)n[e[a]]=requireJs(e[a]);else n.null=requireJs("");easyVue.async.parallel(n,function(t,n){var a=0;for(key in n)if(a++,n[key])if(key.indexOf("/components/")>-1){var o=JSON.parse(n[key]),s=o.HtmlData,r=o.jsData,i=key.substring(key.lastIndexOf("/")+1,key.length-3);if(r.indexOf("created")>-1){var l=r.substring(0,r.indexOf("{",r.indexOf("created"))+1),u=r.substring(r.indexOf("{",r.indexOf("created"))+1,r.length);r=l+'\n\t\t\tflux.subscribe(this, "'+i+'");\n'+u}var c=o.cssData;componentPool[key.replaceAll(".js",".html")]=s,insertJs(r,a,e.length),insertCss(c)}else if(key.indexOf("/widget")>-1){var f=JSON.parse(n[key]),s=f.HtmlData,r=f.jsData,c=f.cssData;s=s.replaceAll("'",'"'),r=r.replaceAll("~html",s),insertJs(r,a,e.length),insertCss(c)}else-1==key.indexOf("/widget")&&insertJs(n[key],a,e.length);if(++easyVue.useCount==storage.useCount){for(var a=callbackPool.length-1;a>=0;a--)callbackPool[a]();easyVue.useCount=0,callbackPool=[]}})};