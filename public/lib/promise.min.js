/*
 * ES6 Promise.js
 * 2017 by XuLiangzhan
 */
(function(b,a){if(!b.Promise){b.Promise=a()}})(typeof window!=="undefined"?window:this,function(){var j="[[Promise Status]]",k="[[Promise Value]]",d="[[Promise Callback]]",c="[[Promise Thener]]",l="pending",m="resolved",i="rejected";function h(q,r,p){if(q&&r){for(var o=0,n=q.length||0;o<n;o++){r.call(p||this,q[o],o,q)}}}function b(p,q,o){var n=[];h(p,function(r){if(q.apply(this,arguments)){n.push(r)}},o);return n}function f(n){if(n[j]!==l){n[c]=b(n[c],function(o){var p=n[k],r=p&&p.constructor===e,s=r&&o[d].exception||o[d][n[j]];if(s){try{p=s(r?p.message:p)}catch(q){p=new e(q)}finally{g(o,p,m)}return false}return true})}}function g(p,o,n){if(o&&o.constructor===a){o.then(function(q){g(p,q,m)},function(q){g(p,q,i)})}else{if(p[j]===l){p[j]=n;p[k]=o}f(p)}}function e(n){this.message=n}function a(p){this[k];this[j]=l;this[c]=[];this.then=function(r,q){var s=new a(function(){});s[d]={resolved:r,rejected:q};this[c].push(s);f(this);return s};this["catch"]=function(q){var r=new a(function(){});r[d]={exception:q};this[c].push(r);f(this);return r};if(typeof p==="function"){try{var n=this;p(function(q){g(n,q,m)},function(q){g(n,q,i)})}catch(o){g(this,new e(o),i)}}}h(["all","race"],function(o,n){a[o]=function(u){var s=0,r=0,q=n===0,t=q?u.length:1,p=[];return new a(function(w,x){function v(y,z){p[y]=z;if(++s===t){(r===0?w:x)(q?p:z)}}if(u.length>0){h(u,function(z,y){if(z&&z.constructor===a){z.then(function(A){v(y,A)},function(A){r++;v(y,A)})}else{v(y,z)}})}else{w()}})}});h(["resolve","reject"],function(o,n){a[o]=function(p){return new a(function(q,r){(n===0?q:r)(p)})}});return a});